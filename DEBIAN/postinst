#!/bin/bash
set -e

# Check if nodejs is available in PATH
if ! command -v node &> /dev/null; then
    echo "WARNING: Node.js was not found in your PATH."
    echo "Claude Desktop requires Node.js to function properly."
    echo ""
    echo "You can install Node.js through one of these methods:"
    echo "  1. System packages: sudo apt install nodejs npm"
    echo "  2. Node Version Manager (NVM): https://github.com/nvm-sh/nvm"
    echo "     After installing NVM, run: nvm install --lts"
    echo ""
    echo "Note: If you already have Node.js installed via NVM, make sure to load NVM"
    echo "in your shell profile (~/.bashrc, ~/.zshrc, etc.) and restart your terminal."
fi

# Check if npm is available in PATH
if ! command -v npm &> /dev/null; then
    echo "WARNING: npm was not found in your PATH."
    echo "Claude Desktop requires npm to function properly."
    echo ""
    echo "You can install npm through one of these methods:"
    echo "  1. System packages: sudo apt install npm"
    echo "  2. It's usually included with Node.js when installed via NVM"
    echo ""
    echo "Note: If you already have npm installed via NVM, make sure to load NVM"
    echo "in your shell profile (~/.bashrc, ~/.zshrc, etc.) and restart your terminal."
fi

# Standard Debian postinst sections
case "$1" in
    configure)
        # Configure application if needed
        ;;
    abort-upgrade|abort-remove|abort-deconfigure)
        ;;
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

exit 0

